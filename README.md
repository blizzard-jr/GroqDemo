У меня есть ключ Api к сервису Groq: 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
Необходимо реализовать интерфейс для доступа к llm model с id: deepseek-r1-distill-llama-70b, которая находится на groq 
Также нужно будет захостить веб интерфейс на vercel
Фронтенд: HTML + TailwindCSS + JavaScript (fetch API)
Бекенд: Node.js + Express.js
На веб сервисе должна быть возможность сделать текстовый запрос к модели и получить от неё ответ и вывести его пользователю. 




----------------------------------------------------------------------------------------------------------------------------
Обновление
----------------------------------------------------------------------------------------------------------------------------
Теперь необходимо реализовать следуюшую логику: 
На веб-интерфейс необходимо добавить возможность записывать аудио, чтобы пользователь смог надиктовывать запрос голосом. 
После того, как пользователь надиктовал запрос, файл должен сохранятся по какому-то заранее известному публичному адресу и затем этот адрес файла необходимо передать в запросе к модели, котрая находится на groq и переводит речь в текст - её id: whisper-large-v3-turbo
После того, как эта модель вернула текст запроса, нужно отпраивть этот текст, как запрос в llm model с нашей прошлой версии приложения - id: deepseek-r1-distill-llama-70b
И после этого выдать ответ пользователю в удобном для чтения виде. 
Функция отправки запроса текстом должна также сохранится в нашем приложении - в таком случае запрос сразу отпраляется к deepseek-r1-distill-llama-70b. 
После реализации функционала приложения подготовь его к хостингу на vercel и напиши инструкцию для этого. 
----------------------------------------------------------------------------------------------------------------------------
Обновление
----------------------------------------------------------------------------------------------------------------------------

## Инструкция по установке и запуску

### Локальный запуск

1. Установите зависимости:
```
npm install
```

2. Запустите сервер:
```
npm start
```
или для разработки:
```
npm run dev
```

3. Откройте браузер и перейдите по адресу [http://localhost:3000](http://localhost:3000)

### Деплой на Vercel

1. Установите Vercel CLI:
```
npm install -g vercel
```

2. Войдите в аккаунт Vercel:
```
vercel login
```

3. Выполните деплой:
```
vercel
```

4. Для продакшн деплоя:
```
vercel --prod
```

## Структура проекта

- `index.js` - основной файл сервера для локальной разработки
- `server.js` - файл сервера для совместимости с предыдущей версией (не используется в Vercel)
- `config.js` - файл с конфигурацией API ключа и модели
- `api/` - директория с API-роутами для Vercel
  - `chat.js` - API для текстовых запросов к модели
  - `audio.js` - API для аудио запросов и распознавания речи
- `public/` - директория со статическими файлами
  - `index.html` - HTML страница интерфейса
  - `script.js` - клиентский JavaScript для взаимодействия с API
- `vercel.json` - файл конфигурации для деплоя на Vercel

## Функциональность

Приложение предоставляет два способа взаимодействия с моделями Groq:

1. **Текстовый запрос**
   - Ввод текста напрямую в форму
   - Отправка запроса к модели deepseek-r1-distill-llama-70b
   - Получение и отображение ответа

2. **Голосовой запрос**
   - Запись аудио через микрофон устройства
   - Преобразование аудио в текст с помощью модели whisper-large-v3-turbo
   - Отправка распознанного текста к модели deepseek-r1-distill-llama-70b
   - Отображение распознанного текста и ответа модели

## Особенности деплоя на Vercel

При деплое на Vercel важно учесть следующие моменты:

1. **Структура API-роутов**: Для правильной работы на Vercel используются файлы в директории `/api`, которые экспортируют функцию `handler` по умолчанию.

2. **Отсутствие файловой системы**: Vercel имеет только временное хранилище файлов (ephemeral storage). Наше приложение обрабатывает аудиоданные в памяти без сохранения на диск.

3. **Переменные окружения**: При деплое с помощью Vercel CLI, вам будет предложено добавить переменные окружения. Убедитесь, что добавили GROQ_API_KEY.

4. **Настройка конфигурации**: В `vercel.json` используются `builds` вместо `functions` для правильной работы с Vercel.

## Известные проблемы и их решения

1. **Ошибка 500 Internal Server Error при обработке аудио**:
   - Vercel имеет read-only файловую систему, поэтому попытки записи в `/var/task/public/uploads/` приводят к ошибке: "EROFS: read-only file system"
   - Решение: используется обработка аудио полностью в памяти через альтернативный маршрут `/api/audio-alt`, который не требует сохранения на диск
   - Клиентский JavaScript автоматически определяет, работает ли приложение на Vercel, и выбирает соответствующий маршрут

2. **Ошибка при загрузке аудио**:
   - В production (на Vercel) используется маршрут `/api/audio-alt` вместо `/api/audio`
   - Клиентский код автоматически определяет окружение и выбирает соответствующий маршрут

## Дополнительная настройка (при необходимости)

Если вы хотите изменить максимальный размер загружаемых файлов или другие параметры, отредактируйте соответствующие настройки в файле `server.js` в разделе настройки multer.
